{% extends 'base.html.twig' %}

{% block title %}Catégories{% endblock %}

{% block main %}
    <div class="search border-b shadow-lg p-4">
        {{ form_start(form) }}
        {{ form_end(form) }}
    </div>
    <div class="border-b shadow-lg p-4 grid grid-cols-2">
        <div>
            <h3 class="text-lg font-bold">Catégories ({{categories.totalItemCount}})</h3>
        </div>
        <div class="text-right">
            {% include './components/a.html.twig' with {
                'path': path('app_user_category_add'),
                'class': 'fancy-add bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded float-right',
                'label': 'Ajouter une catégorie',
            } %}
        </div>
    </div>
    <div class="mt-4">
        <table class="table table-bordered table-striped table-hover w-full">
            <colgroup>
                <col class="w-8"/>
                <col/>
                <col/>
                <col/>
                <col class="w-8"/>
            </colgroup>
            <thead>
            <tr>
                <th class="border text-center">
                </th>
                <th class="border">Nom</th>
                <th class="border">Slug</th>
                <th class="border">Entreprise</th>
                <th class="border"></th>
            </tr>
            </thead>
            <tbody>
            {% for category in categories %}
                <tr>
                    <td class="text-center border">
                        <a data-type="ajax" class="fancy-add"
                           href="{{ path('app_user_category_edit', {'id' : category.id }) }}">
                            <svg class="feather feather-edit h-4 w-4 mx-auto align-middle" viewBox="0 0 24 24"
                                 fill="none" stroke="blue" stroke-width="1.5" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <path d="M19 1L23 5L5 23H1V19L19 1Z"></path>
                            </svg>
                        </a>
                    </td>
                    <td class="border">{{ category.name }}</td>
                    <td class="border">{{ category.slug }}</td>
                    <td class="border">{{ category.company.name }}</td>
                    <td class="text-center border do-confirm">
                        {% include './components/a.html.twig' with {
                            'path': path('app_user_category_delete', {'id': category.id, 'token': csrf_token('delete' ~ category.id)}),
                            'class': 'text-white font-bold py-2 px-4 rounded',
                            'svg': 'http://www.w3.org/2000/svg',
                            'label': '',
                            'svg_path': 'M15 5a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h1V4a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1h1zm-4 1h-2V4a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v2H5a1 1 0 0 0 0 2h1v9a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V8h1a1 1 0 0 0 0-2h-1V6a1 1 0 0 0-1-1z'
                        } %}
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="5" class="text-center border">Aucune catégorie définie</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% if categories is not empty %}
            <div class="box-footer">
                <div class="navigation">
                    {{ knp_pagination_render(categories) }}
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}
